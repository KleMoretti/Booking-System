# è½¦æ¬¡æ¨¡æ¿å¯¼å…¥åŠŸèƒ½ - å®ç°æ€»ç»“

## âœ… å®ŒæˆçŠ¶æ€

æ‰€æœ‰åŠŸèƒ½å·²å®Œæˆï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼

## ğŸ“¦ æ–°å¢æ–‡ä»¶æ¸…å•

### åç«¯æ–‡ä»¶ï¼ˆJava + MyBatisï¼‰

#### 1. å®ä½“ç±»

- `booking-system-backend/src/main/java/com/booking/entity/TripTemplate.java`
  - è½¦æ¬¡æ¨¡æ¿å®ä½“ç±»ï¼ŒåŒ…å«æ‰€æœ‰å­—æ®µçš„ getter/setter

#### 2. DTO ç±»

- `booking-system-backend/src/main/java/com/booking/dto/TripTemplateExcelDTO.java`
  - Excel å¯¼å…¥ä¸“ç”¨ DTOï¼Œä½¿ç”¨ EasyExcel æ³¨è§£

#### 3. Mapper å±‚

- `booking-system-backend/src/main/java/com/booking/mapper/TripTemplateMapper.java`
  - Mapper æ¥å£ï¼Œå®šä¹‰æ•°æ®åº“æ“ä½œæ–¹æ³•
- `booking-system-backend/src/main/resources/mapper/TripTemplateMapper.xml`
  - MyBatis XML æ˜ å°„æ–‡ä»¶ï¼Œå®ç° SQL è¯­å¥

#### 4. Service å±‚

- `booking-system-backend/src/main/java/com/booking/service/TripTemplateService.java`
  - Service æ¥å£
- `booking-system-backend/src/main/java/com/booking/service/impl/TripTemplateServiceImpl.java`
  - Service å®ç°ç±»ï¼ŒåŒ…å« Excel å¯¼å…¥é€»è¾‘

#### 5. Controller å±‚

- `booking-system-backend/src/main/java/com/booking/controller/TripTemplateController.java`
  - REST API æ§åˆ¶å™¨ï¼Œæä¾› HTTP æ¥å£

#### 6. æ•°æ®åº“è„šæœ¬

- `booking-system-backend/src/main/resources/db/trip_template_schema.sql`
  - åˆ›å»º trip_templates è¡¨çš„ SQL è„šæœ¬

### å‰ç«¯æ–‡ä»¶ï¼ˆReact + Ant Designï¼‰

#### 1. API å°è£…

- `booking-system-frontend/src/api/tripTemplate.js`
  - æ‰€æœ‰è½¦æ¬¡æ¨¡æ¿ç›¸å…³çš„ API è¯·æ±‚å°è£…

#### 2. é¡µé¢ç»„ä»¶

- `booking-system-frontend/src/pages/Admin/TripTemplateManagement.jsx`
  - è½¦æ¬¡æ¨¡æ¿ç®¡ç†ä¸»é¡µé¢
- `booking-system-frontend/src/pages/Admin/TripTemplateManagement.css`
  - é¡µé¢æ ·å¼æ–‡ä»¶

#### 3. è·¯ç”±é›†æˆ

- ä¿®æ”¹äº† `booking-system-frontend/src/pages/Admin/index.jsx`
  - æ·»åŠ äº†è½¦æ¬¡æ¨¡æ¿ç®¡ç†çš„èœå•å’Œè·¯ç”±

### é…ç½®æ–‡ä»¶ä¿®æ”¹

#### 1. Maven ä¾èµ–

- ä¿®æ”¹äº† `booking-system-backend/pom.xml`
  - æ·»åŠ äº† EasyExcel ä¾èµ–

### æ–‡æ¡£æ–‡ä»¶

#### 1. åŠŸèƒ½è¯´æ˜

- `è½¦æ¬¡æ¨¡æ¿å¯¼å…¥åŠŸèƒ½è¯´æ˜.md`
  - è¯¦ç»†çš„åŠŸèƒ½ä»‹ç»ã€API æ–‡æ¡£ã€ä½¿ç”¨è¯´æ˜

#### 2. ä½¿ç”¨æŒ‡å—

- `è½¦æ¬¡æ¨¡æ¿å¯¼å…¥ä½¿ç”¨æŒ‡å—.md`
  - å¿«é€Ÿå¯åŠ¨æŒ‡å—ã€æµ‹è¯•æ­¥éª¤ã€å¸¸è§é—®é¢˜

#### 3. æœ¬æ–‡ä»¶

- `è½¦æ¬¡æ¨¡æ¿å¯¼å…¥å®ç°æ€»ç»“.md`
  - æ–‡ä»¶æ¸…å•å’Œä½¿ç”¨æ­¥éª¤

## ğŸš€ å¯åŠ¨æ­¥éª¤

### 1. åˆå§‹åŒ–æ•°æ®åº“

```bash
# Windows PowerShell
cd d:\@DataBase\Booking-System
mysql -u root -p booking_system < booking-system-backend\src\main\resources\db\trip_template_schema.sql
```

### 2. å®‰è£…åç«¯ä¾èµ–å¹¶å¯åŠ¨

```bash
cd booking-system-backend
mvn clean install
mvn spring-boot:run
```

### 3. å®‰è£…å‰ç«¯ä¾èµ–å¹¶å¯åŠ¨

```bash
cd booking-system-frontend
npm install
npm run dev
```

### 4. è®¿é—®ç³»ç»Ÿ

1. æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:5173
2. ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•: `admin` / `admin123`
3. è¿›å…¥"ç®¡ç†åå°"
4. ç‚¹å‡»"è½¦æ¬¡æ¨¡æ¿ç®¡ç†"èœå•

## ğŸ¯ åŠŸèƒ½ç‰¹ç‚¹

### 1. Excel å¯¼å…¥

- âœ… æ”¯æŒ .xlsx å’Œ .xls æ ¼å¼
- âœ… ä½¿ç”¨ EasyExcel é«˜æ€§èƒ½è§£æ
- âœ… è‡ªåŠ¨æ•°æ®éªŒè¯
- âœ… æ‰¹é‡å¯¼å…¥å¤„ç†
- âœ… è¯¦ç»†çš„é”™è¯¯æç¤º

### 2. æ•°æ®éªŒè¯

- âœ… è½¦æ¬¡å·å”¯ä¸€æ€§æ£€æŸ¥
- âœ… ç«™ç‚¹å­˜åœ¨æ€§éªŒè¯
- âœ… æ—¶é—´æ ¼å¼éªŒè¯
- âœ… å¿…å¡«å­—æ®µæ£€æŸ¥
- âœ… æ•°å€¼æœ‰æ•ˆæ€§éªŒè¯

### 3. æŸ¥è¯¢åŠŸèƒ½

- âœ… æŸ¥è¯¢æ‰€æœ‰æ¨¡æ¿
- âœ… æŸ¥è¯¢å¯ç”¨çš„æ¨¡æ¿
- âœ… æ ¹æ® ID æŸ¥è¯¢è¯¦æƒ…
- âœ… å…³è”æŸ¥è¯¢ç«™ç‚¹åç§°

### 4. ç®¡ç†åŠŸèƒ½

- âœ… æ·»åŠ å•ä¸ªæ¨¡æ¿
- âœ… æ›´æ–°æ¨¡æ¿ä¿¡æ¯
- âœ… åˆ é™¤æ¨¡æ¿
- âœ… å¯ç”¨/ç¦ç”¨æ¨¡æ¿

### 5. ç”¨æˆ·ç•Œé¢

- âœ… å“åº”å¼è®¾è®¡
- âœ… è¡¨æ ¼å±•ç¤º
- âœ… è¯¦æƒ…å¼¹çª—
- âœ… çŠ¶æ€æ ‡ç­¾
- âœ… æ“ä½œç¡®è®¤
- âœ… ä¸‹è½½æ¨¡æ¿
- âœ… æ‹–æ‹½ä¸Šä¼ 

## ğŸ“‹ Excel æ¨¡æ¿æ ¼å¼

```
è½¦æ¬¡å· | è½¦è¾†ä¿¡æ¯ | æ€»åº§ä½æ•° | å‡ºå‘ç«™ | åˆ°è¾¾ç«™ | å‡ºå‘æ—¶é—´ | åˆ°è¾¾æ—¶é—´ | åŸºç¡€ç¥¨ä»·
-------|---------|---------|--------|--------|----------|----------|----------
G1001  | CRH380A | 556     | åŒ—äº¬å—ç«™ | ä¸Šæµ·è™¹æ¡¥ç«™ | 08:00 | 12:28 | 553.5
D2001  | CRH2A   | 613     | å¹¿å·å—ç«™ | æ·±åœ³åŒ—ç«™   | 09:30 | 10:15 | 79.5
```

## ğŸ”Œ API æ¥å£

### 1. å¯¼å…¥ Excel

```
POST /api/admin/trip-templates/import
Content-Type: multipart/form-data
å‚æ•°: file (Excelæ–‡ä»¶)
```

### 2. æŸ¥è¯¢æ‰€æœ‰æ¨¡æ¿

```
GET /api/admin/trip-templates/list
```

### 3. æŸ¥è¯¢å¯ç”¨çš„æ¨¡æ¿

```
GET /api/admin/trip-templates/list/active
```

### 4. æ ¹æ® ID æŸ¥è¯¢

```
GET /api/admin/trip-templates/{id}
```

### 5. æ·»åŠ æ¨¡æ¿

```
POST /api/admin/trip-templates
Content-Type: application/json
```

### 6. æ›´æ–°æ¨¡æ¿

```
PUT /api/admin/trip-templates/{id}
Content-Type: application/json
```

### 7. åˆ é™¤æ¨¡æ¿

```
DELETE /api/admin/trip-templates/{id}
```

## ğŸ—„ï¸ æ•°æ®åº“è¡¨ç»“æ„

```sql
CREATE TABLE trip_templates (
    template_id          INT PRIMARY KEY AUTO_INCREMENT,
    trip_number          VARCHAR(50)  NOT NULL,
    vehicle_info         VARCHAR(100),
    total_seats          INT          NOT NULL DEFAULT 0,
    departure_station_id INT          NOT NULL,
    arrival_station_id   INT          NOT NULL,
    departure_time       TIME         NOT NULL,
    arrival_time         TIME         NOT NULL,
    base_price           DECIMAL(12,2) NOT NULL DEFAULT 0.00,
    is_active            TINYINT      DEFAULT 1,
    create_time          DATETIME     DEFAULT CURRENT_TIMESTAMP,
    update_time          DATETIME     DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

## âœ… æµ‹è¯•æ£€æŸ¥æ¸…å•

### åç«¯æµ‹è¯•

- [ ] æ•°æ®åº“è¡¨åˆ›å»ºæˆåŠŸ
- [ ] åç«¯æœåŠ¡æ­£å¸¸å¯åŠ¨
- [ ] API æ¥å£å¯è®¿é—®
- [ ] Excel æ–‡ä»¶è§£ææ­£å¸¸
- [ ] æ•°æ®éªŒè¯æ­£ç¡®
- [ ] æ•°æ®åº“æ’å…¥æˆåŠŸ

### å‰ç«¯æµ‹è¯•

- [ ] å‰ç«¯æœåŠ¡æ­£å¸¸å¯åŠ¨
- [ ] é¡µé¢æ¸²æŸ“æ­£å¸¸
- [ ] æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æ­£å¸¸
- [ ] æ•°æ®åˆ—è¡¨å±•ç¤ºæ­£å¸¸
- [ ] è¯¦æƒ…å¼¹çª—æ­£å¸¸
- [ ] åˆ é™¤åŠŸèƒ½æ­£å¸¸

### é›†æˆæµ‹è¯•

- [ ] ä¸Šä¼ æ­£ç¡®çš„ Excel æ–‡ä»¶æˆåŠŸ
- [ ] ä¸Šä¼ é”™è¯¯çš„ Excel æ–‡ä»¶æœ‰æç¤º
- [ ] é‡å¤è½¦æ¬¡å·è¢«æ­£ç¡®å¤„ç†
- [ ] ä¸å­˜åœ¨çš„ç«™ç‚¹è¢«æ­£ç¡®è¯†åˆ«
- [ ] å¯¼å…¥åèƒ½åœ¨åˆ—è¡¨ä¸­çœ‹åˆ°
- [ ] æ•°æ®åº“ä¸­çš„æ•°æ®æ­£ç¡®

## ğŸ¨ æŠ€æœ¯æ ˆ

### åç«¯

- Spring Boot 2.7.16
- MyBatis Plus 3.5.3.2
- EasyExcel 3.3.2
- MySQL 8.0
- Java 21

### å‰ç«¯

- React 18
- Ant Design 5
- Vite
- Axios

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### 1. å‡†å¤‡ Excel æ–‡ä»¶

åˆ›å»º `trip_templates.xlsx`:

```
è½¦æ¬¡å·,è½¦è¾†ä¿¡æ¯,æ€»åº§ä½æ•°,å‡ºå‘ç«™,åˆ°è¾¾ç«™,å‡ºå‘æ—¶é—´,åˆ°è¾¾æ—¶é—´,åŸºç¡€ç¥¨ä»·
G1001,CRH380A,556,åŒ—äº¬å—ç«™,ä¸Šæµ·è™¹æ¡¥ç«™,08:00,12:28,553.5
G1002,CRH380A,556,ä¸Šæµ·è™¹æ¡¥ç«™,åŒ—äº¬å—ç«™,13:00,17:28,553.5
D2001,CRH2A,613,å¹¿å·å—ç«™,æ·±åœ³åŒ—ç«™,09:30,10:15,79.5
```

### 2. å¯¼å…¥æ“ä½œ

1. ç‚¹å‡»"å¯¼å…¥ Excel"æŒ‰é’®
2. é€‰æ‹©æ–‡ä»¶
3. ç­‰å¾…å¤„ç†
4. æŸ¥çœ‹ç»“æœ

### 3. éªŒè¯ç»“æœ

```sql
SELECT COUNT(*) FROM trip_templates; -- åº”è¯¥æ˜¾ç¤º3æ¡è®°å½•
SELECT * FROM trip_templates WHERE trip_number = 'G1001';
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç«™ç‚¹ä¾èµ–**: å¯¼å…¥å‰ç¡®ä¿å‡ºå‘ç«™å’Œåˆ°è¾¾ç«™å·²åœ¨ç³»ç»Ÿä¸­å­˜åœ¨
2. **æ—¶é—´æ ¼å¼**: å¿…é¡»ä½¿ç”¨ 24 å°æ—¶åˆ¶ HH:mm æ ¼å¼
3. **è½¦æ¬¡å”¯ä¸€**: åŒä¸€è½¦æ¬¡å·åªèƒ½å¯¼å…¥ä¸€æ¬¡
4. **æ–‡ä»¶å¤§å°**: å»ºè®®å•æ¬¡å¯¼å…¥ä¸è¶…è¿‡ 1000 æ¡è®°å½•
5. **ç¼–ç æ ¼å¼**: Excel æ–‡ä»¶å»ºè®®ä½¿ç”¨ UTF-8 ç¼–ç 

## ğŸ”§ æ•…éšœæ’æŸ¥

### å¯¼å…¥å¤±è´¥

1. æ£€æŸ¥æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥æ•°æ®æ ¼å¼æ˜¯å¦ç¬¦åˆè¦æ±‚
3. æŸ¥çœ‹åç«¯æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯
4. éªŒè¯æ•°æ®åº“è¿æ¥æ­£å¸¸

### æ•°æ®ä¸æ˜¾ç¤º

1. åˆ·æ–°é¡µé¢
2. æ£€æŸ¥ API è¯·æ±‚æ˜¯å¦æˆåŠŸ
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
4. éªŒè¯æ•°æ®åº“ä¸­æ˜¯å¦æœ‰æ•°æ®

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [è½¦æ¬¡æ¨¡æ¿å¯¼å…¥åŠŸèƒ½è¯´æ˜.md](./è½¦æ¬¡æ¨¡æ¿å¯¼å…¥åŠŸèƒ½è¯´æ˜.md) - è¯¦ç»†åŠŸèƒ½è¯´æ˜
- [è½¦æ¬¡æ¨¡æ¿å¯¼å…¥ä½¿ç”¨æŒ‡å—.md](./è½¦æ¬¡æ¨¡æ¿å¯¼å…¥ä½¿ç”¨æŒ‡å—.md) - å¿«é€Ÿä½¿ç”¨æŒ‡å—
- [STARTUP_GUIDE.md](./STARTUP_GUIDE.md) - ç³»ç»Ÿå¯åŠ¨æŒ‡å—

## ğŸ‰ æ€»ç»“

è½¦æ¬¡æ¨¡æ¿å¯¼å…¥åŠŸèƒ½å·²å…¨éƒ¨å®ç°ï¼ŒåŒ…æ‹¬ï¼š

- âœ… å®Œæ•´çš„åç«¯å®ç°ï¼ˆEntityã€Mapperã€Serviceã€Controllerï¼‰
- âœ… å®Œæ•´çš„å‰ç«¯å®ç°ï¼ˆé¡µé¢ã€APIã€è·¯ç”±ï¼‰
- âœ… Excel å¯¼å…¥å’Œè§£æ
- âœ… æ•°æ®éªŒè¯å’Œé”™è¯¯å¤„ç†
- âœ… æŸ¥è¯¢ã€åˆ é™¤ç­‰ç®¡ç†åŠŸèƒ½
- âœ… è¯¦ç»†çš„æ–‡æ¡£è¯´æ˜

ç°åœ¨å¯ä»¥å¼€å§‹ä½¿ç”¨æ­¤åŠŸèƒ½æ‰¹é‡å¯¼å…¥è½¦æ¬¡æ¨¡æ¿äº†ï¼

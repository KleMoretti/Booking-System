# Mock模式使用说明

## 概述

Mock模式允许你在没有后端服务的情况下预览和测试前端界面。所有API请求将被拦截并返回模拟数据。

## 如何启用Mock模式

### 1. 安装依赖

首先需要安装 `axios-mock-adapter` 依赖：

```bash
npm install axios-mock-adapter --save-dev
```

### 2. 配置环境变量

在 `.env` 文件中设置：

```env
VITE_USE_MOCK=true
```

### 3. 启动开发服务器

```bash
npm run dev
```

启动后，控制台会显示 `🎭 Mock模式已启用，使用模拟数据`

## 切换到真实后端

当后端服务准备好后，只需修改 `.env` 文件：

```env
VITE_USE_MOCK=false
```

然后重启开发服务器即可。

## Mock数据说明

### 测试账号

Mock模式下，可以使用任意用户名和密码登录，系统会自动返回成功。

**默认测试用户信息：**
- 用户名: testuser
- 姓名: 测试用户
- 手机: 13800138000
- 邮箱: test@example.com

### 可用功能

✅ **用户功能**
- 登录/注册（任意账号密码均可）
- 获取/更新用户信息
- 修改密码
- 登出

✅ **车站功能**
- 获取车站列表（包含10个主要城市）

✅ **车次功能**
- 搜索车次
- 查看车次列表
- 查看车次详情
- 查看可用座位
- 查询票价

✅ **订单功能**
- 创建订单
- 查看订单列表（包含3个示例订单）
- 查看订单详情
- 取消订单
- 支付订单

✅ **支付功能**
- 创建支付
- 查询支付状态

✅ **管理员功能**
- 查看统计数据
- 改签退票管理（查看列表、审核通过/拒绝）
- 车次管理（增删改查、批量管理）
- 票价管理（修改各座位等级票价）

### 预设数据

#### 车站列表
- 北京、上海、广州、深圳、成都
- 杭州、南京、武汉、西安、重庆

#### 车次列表
- G101: 北京 → 上海 (高铁)
- G103: 北京 → 上海 (高铁)
- D201: 北京 → 上海 (动车)
- G305: 广州 → 深圳 (高铁)

#### 订单列表
- 3个示例订单（待支付、已支付、已完成状态）

#### 改签退票请求
- 3个示例请求（待审核、已通过、已拒绝状态）
- 包含退票和改签两种类型

## 自定义Mock数据

如需修改Mock数据，编辑以下文件：

- `src/mock/data.js` - 所有Mock数据定义
- `src/mock/index.js` - API拦截器和响应逻辑

## 注意事项

⚠️ **重要提示**

1. Mock模式仅用于前端开发和界面预览
2. Mock数据不会持久化，刷新页面后会重置
3. 切换Mock模式需要重启开发服务器
4. Mock模式下的登录状态仅存储在浏览器中
5. 生产环境请确保 `VITE_USE_MOCK=false`

## 故障排除

### Mock模式未生效

1. 检查 `.env` 文件中 `VITE_USE_MOCK=true`
2. 确认已安装 `axios-mock-adapter` 依赖
3. 重启开发服务器
4. 检查浏览器控制台是否有 `🎭 Mock模式已启用` 消息

### 看不到数据

1. 打开浏览器控制台，查看是否有错误信息
2. 检查 Mock API 日志（以 `Mock:` 开头）
3. 确认API路径与Mock配置匹配

## 开发建议

- 开发新功能时，先在Mock模式下完成UI
- UI完成后，再对接真实后端API
- 保持Mock数据与后端API响应格式一致
- 定期更新Mock数据以匹配最新的API设计
